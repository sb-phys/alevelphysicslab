<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>APL Blogs</title>
  <link rel="stylesheet" href="../../style.css" />
  <style>
    .post-grid{display:grid;gap:16px;margin-top:24px}
    @media(min-width:780px){.post-grid{grid-template-columns:repeat(2,1fr)}}
    .post-card{border:1px solid #8a6b3d33;border-radius:12px;padding:16px;background:#faefd8}
    .post-card h3{margin:0 0 6px}
    .post-card p{margin:0 0 10px;opacity:.85}
    .post-card a{font-weight:600}
  </style>
</head>
<body>
  <header>
    <h1>APL Blogs</h1>
    <a href="../../index.html">← Back to Home</a>
  </header>

  <main>
    <section class="intro">
      <h2>Latest Posts</h2>
      <div id="postGrid" class="post-grid"></div>
      <p id="emptyMsg" style="opacity:.8;display:none;">No posts yet. Check back soon!</p>
    </section>

    <aside class="sidebar">
      <h2>About the Blog</h2>
      <p>New post every week. Study notes, simulation breakdowns, and exam strategies.</p>
      <a class="btn" href="./">Blog Home</a>
    </aside>
  </main>

  <!-- data lives in repo root -->
  <script src="../../posts-data.js"></script>
  <script>
    const posts = (window.getAllPosts ? window.getAllPosts() : []) || [];
    const grid  = document.getElementById('postGrid');
    const empty = document.getElementById('emptyMsg');

    if (!posts.length) {
      empty.style.display = 'block';
    } else {
      grid.innerHTML = posts.map(p => `
        <article class="post-card">
          <h3>${p.title}</h3>
          <p>${p.excerpt || ''}</p>
          <p style="opacity:.7">${p.date} • ${(p.tags||[]).join(', ')}</p>
          <a href="../post/?slug=${encodeURIComponent(p.slug)}">Read more →</a>
        </article>
      `).join('');
    }
  </script>
</body>
</html>
